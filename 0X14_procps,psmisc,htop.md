# 0X14 procps, psmisc, htop

## procps

procps是一款Linux系统中的进程管理和内存管理工具集.包含一些进程管理和内存管理工具.一般来说应该是发行版自带.如果没有自带,可以用包管理软件进行安装.它的包名是procps-ng.

这个工具集中最常用的命令有三个:

`ps`用于查看当前的进程.加参数`-A`可以查看所有进程(默认会隐藏很多进程不显示).这个命令在输出结果后就会结束,但是由于它在检索进程的时候它自己仍然处于工作状态,所以调用`ps`命令打印出来的进程表中总包含它自身.

`top`用于动态展示进程的状态.`ps`仅仅是给进程来了一个快照,它所展示的是`ps`命令执行的时候进程的状态.但是`top`会一直刷新进程所占用的内存等信息.

`kill`用于向进程传递消息.一般用到这个命令的时候都是为了强制终止进程.不过据我所知,至少有kill命令--bash内置命令,GNU Coreutils的kill,procps的kill.三者用起来应该差不多.

## psmisc

这也是一个用于进程管理的工具集.它提供的命令少一些,常用命令有两个:

`pstree`功能类似`ps`,但是`pstree`是用树形图的形式展示进程之间的关系.

`killall`用于终止进程.比起`kill`有个好处.它是按照进程名(启动进程的命令名)来进行查找,而不是查找ID.

但是需要注意的是killall会把所有同名进程终止,例如:

```shell
killall lua
```

会终止掉所有lua虚拟机进程.

psmisc也是一般由Linux发行版默认安装,如果没有安装可以使用包管理软件进行安装.包名为psmisc.

## htop

htop也是一个进程管理工具.与ps,pstree等不同.htop不是把进程信息打印出来了事,而是会启动一个ncurses写的界面.在这个界面内对进程进行管理,相对方便一些(相当于Windows的任务管理器).

你可以使用包管理软件进行安装,包名就是htop.

启动htop之后.按F1~F10等快捷键就能执行对应的功能.例如切换树状图,给进程排序,给进程传递终止信号等.

你可以全键盘操作htop.但是如果你是在虚拟终端中使用htop,可能遇到快捷键F10被虚拟终端占用,无法用F10退出htop的问题(xterm无此问题).这时有两种解决方法:用快捷键C-c终止htop进程或者用鼠标点击按钮(在虚拟终端中htop支持鼠标点击).

## 资料

* [procps官网](https://gitlab.com/procps-ng/procps)
* [psmisc官网](http://psmisc.sourceforge.net/index.html)
* [htop官网](http://hisham.hm/htop/)